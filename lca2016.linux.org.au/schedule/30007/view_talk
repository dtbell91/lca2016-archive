









<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" type="image/x-icon" href="/favicon.ico">

    <title>linux.conf.au 2016 | 1 - 5 Feb | LCA By The Bay</title>

    <!-- Bootstrap core CSS -->
    <link href="/css/bootstrap.css" rel="stylesheet">
    <!-- Custom styles for this template -->
    <link href="/css/carousel.css" rel="stylesheet">
    <link href="/css/simple-sidebar.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
<!-- NAVBAR
================================================== -->
  <body>
    <div class="navbar-wrapper">
      <div class="container">

        <nav class="navbar navbar-inverse navbar-static-top">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="#">linux.conf.au 2016</a>
            </div>
	    
<div id="navbar" class="navbar-collapse collapse">
  <ul class="nav navbar-nav">
          <li class=""><a href="/">Home</a></li>
          <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">About<span class="caret"></span></a>
              <ul class="dropdown-menu" role="menu">
          
                  <li><a href="/about/linux.conf.au">linux.conf.au</a></li>
          
                  <li><a href="/about/geelong">Geelong</a></li>
          
                  <li><a href="/about/buses">Buses</a></li>
          
                  <li><a href="/about/team">Team</a></li>
          
                  <li><a href="/about/venue">Venue</a></li>
              </ul>
          </li>
          <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Sponsors<span class="caret"></span></a>
              <ul class="dropdown-menu" role="menu">
          
                  <li><a href="/sponsors/sponsors">Sponsors</a></li>
          
                  <li><a href="/sponsors/why_sponsor">Why Sponsor</a></li>
              </ul>
          </li>
          <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Programme<span class="caret"></span></a>
              <ul class="dropdown-menu" role="menu">
          
                  <li><a href="/programme/about">About</a></li>
          
                  <li><a href="/programme/social_events">Social Events</a></li>
          
                  <li><a href="/programme/miniconfs">Miniconfs</a></li>
          
                  <li><a href="/programme/sunday">Sunday</a></li>
          
                  <li><a href="/programme/monday">Monday</a></li>
          
                  <li><a href="/programme/tuesday">Tuesday</a></li>
          
                  <li><a href="/programme/wednesday">Wednesday</a></li>
          
                  <li><a href="/programme/thursday">Thursday</a></li>
          
                  <li><a href="/programme/friday">Friday</a></li>
              </ul>
          </li>
          <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Register<span class="caret"></span></a>
              <ul class="dropdown-menu" role="menu">
          
                  <li><a href="/register/info">Info</a></li>
          
                  <li><a href="/register/accommodation">Accommodation</a></li>
          
                  <li><a href="/register/business_case">Business Case</a></li>
          
                  <li><a href="/register/code_of_conduct">Code of Conduct</a></li>
          
                  <li><a href="/register/environment">Environment</a></li>
          
                  <li><a href="/register/volunteer">Volunteer</a></li>
          
                  <li><a href="/register/terms_and_conditions">Terms and Conditions</a></li>
              </ul>
          </li>
          <li class=""><a href="/media/news">News</a></li>
          <li class=""><a href="/contact">Contact</a></li>
          <li class=""><a href="/wiki">Wiki</a></li>
      </ul>
</div>

            <div id="navbar" class="navbar-collapse collapse">
<!-- This was the original nav bar code
              <ul class="nav navbar-nav">
                <li class="active"><a href="#">Home</a></li>
                <li><a href="#about">About</a></li>
                <li><a href="#contact">Contact</a></li>
                <li class="dropdown">
                  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Dropdown <span class="caret"></span></a>
                  <ul class="dropdown-menu" role="menu">
                    <li><a href="#">Action</a></li>
                    <li><a href="#">Another action</a></li>
                    <li><a href="#">Something else here</a></li>
                    <li class="divider"></li>
                    <li class="dropdown-header">Nav header</li>
                    <li><a href="#">Separated link</a></li>
                    <li><a href="#">One more separated link</a></li>
                  </ul>
                </li>
              </ul>
-->
            </div>
          </div>
        </nav>
      </div>
    </div>


    <!-- Carousel
    ================================================== -->
      <div id="myCarousel" class="carousel slide" data-ride="carousel">
<!-- Indicators -->
      <ol class="carousel-indicators">
   
        <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
      
        <li data-target="#myCarousel" data-slide-to="1"></li>
      
      </ol>
      <div class="carousel-inner" role="listbox">

   
        <div class="item active">
                            <div style="height: 100%; background-image: url(/img/banner/4a.jpg); background-size: cover; background-position: 80% 75%;">
</div>
<div style="position: absolute; bottom: 0; right: 0.5em; font-size: 10px; color: white">
<p>Kathy Reid/CC-BY-NC-SA</p>
</div>
<style type="text/css" scoped>
.lca2016-banner-logo
{
max-height: 210px;
vertical-align: middle;
}
</style>
<div class="container">
<div class="carousel-caption">
  <img class="img-responsive center-block lca2016-banner-logo" src="/img/lca2016_logo.svg">
  </div>
</div>
            </div>
            
        <div class="item">
              <div style="height: 100%; background-size: cover; background-position: 80% 75%; background-image: url(/img/banner/hobart-banner.png);">
</div>
<div style="position: absolute; bottom: 0; right: 0.5em; font-size: 10px; color: white">
<p>
Christopher Neugebauer/CC-BY-SA</p>
</div>
<div class="container-fluid">
<div class="carousel-caption" style="text-shadow: 0px 1px 5px rgb(0, 0, 0); color: white;">
  <div class="row hidden-xs">
  <div class="col-lg-4 col-lg-offset-2 col-sm-6"><p style="text-align: left; font-size: 5rem; line-height: 4rem;">JANUARY<br>2017<br><b>HOBART</b></p><p></p></div>
  <div class="col-lg-4 col-sm-6"><p style="text-align: right; font-size: 5rem; line-height: 4rem;">LINUX<br>.CONF<br>.AU</p></div>
  </div>
  <div class="row visible-xs-block">
    <p style="line-height: 4rem; font-size: 5rem;">JANUARY 2017 <b>HOBART</b></p>
  <p style="line-height: 4rem; font-size: 3rem;">LINUX.CONF.AU</p>
  </div>
  <div class="row">
  <a href="https://hobart.lca2017.org" class="btn btn-info" role="button">More Info</a>
  </div>
</div>
</div>
            </div>
            
</div>
      <a class="left carousel-control" href="#myCarousel" role="button" data-slide="prev">
        <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
      </a>
      <a class="right carousel-control" href="#myCarousel" role="button" data-slide="next">
        <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
      </a>
    </div>


    <!-- /.carousel -->

  <div id="wrapper"><!-- Main wrapper for the sidebar -->
    <!-- Sidebar -->
        <div id="sidebar-wrapper">
            <div id="background-image-disabled"></div>
            <ul class="sidebar-nav">
                





      

      <li><a href="/person/signin"><span class="l"></span><span class="r"></span><span class="t">Sign in</span></a>

      

      <li><a href="/person/new"><span class="l"></span><span class="r"></span><span class="t">Create an account</span></a>


</ul>

            </ul>
        </div>
    <!-- /#sidebar-wrapper -->

    <!-- Marketing messaging and featurettes
    ================================================== -->
    <!-- Wrap the rest of the page in another container to center all the content. -->
    <div id="page-content-wrapper" class="toggled">
    <a href="#menu-toggle" class="btn btn-default btn-xs" id="menu-toggle" style="margin-left: -13px;">Toggle Menu</a>
    
    <div class="container-fluid marketing">
    <!-- START THE FEATURETTES -->
      <div class="row featurette">
        <div class="col-md-8 col-md-offset-2">
              <div id="flash">

    </div>

          





<p><a href="/programme/schedule/wednesday">&lt;-- Back to schedule</a></p>

<h2>Improving thread synchronization in GlusterD (Daemon for Gluster) using Userspace RCU (Read-copy-update)</h2>
	

<table>

  <tr class="even">
    <td><strong>Project:</td>
    <td colspan="5">
      <a href="http://www.gluster.org/">
Gluster
</a>
</td>


</table>


<div id="proposal">
<div class="abstract">
<blockquote>
<p>Gluster is a open source scalable distributed storage system which can run in any commodity hardware. GlusterD is the daemon which manages the cluster configuration for Gluster.<br /><br />For more information about Gluster please refer to http://www.gluster.org/<br /><br />What is Big-lock in GlusterD:<br />------------------------------------<br /><br />GlusterD was originally designed as a single threaded application which<br />could handle just one transaction at a time. It was made multi-threaded to<br />improve responsiveness and support handling multiple transactions at a<br />time. This was needed for newer features like volume snapshots which could<br />leave GlusterD unresponsive for some periods of time.<br /><br />Making GlusterD multi-threaded required the creation of a thread<br />synchronization mechanism, to protect the shared data-structures (mainly<br />everything under the GlusterD configuration, glusterd_conf_t struct) from<br />concurrent access from multiple threads. This was accomplished using the<br />Big-lock.<br /><br />The Big-lock is an exclusive lock, so any threads which needs to use the<br />protected data need to obtain the Big-lock and give up the Big-lock once<br />done.<br /><br />Problem with Big-lock<br />----------------------------<br /><br />The Big-lock synchronization solution was added into the GlusterD code to<br />solve problems that arose when GlusterD was made multi-threaded. This was<br />supposed to be a quick solution, to allow GlusterD to be shipped.<br /><br />Big-lock as the name suggests, is a coarse grained lock. The coarseness of<br />the lock leads to threads contending even when they are accessing unrelated<br />data, which lead to some deadlocks.<br /><br />One example of this deadlock is with transactions and RPC. If a thread<br />holding the Big-lock blocked on network I/O it may result in a deadlock.<br />This could happen when the remote endpoint is disconnected. The callback<br />code would be executed in the same thread that has acquired the Big-lock.<br />All network I/O handlers, including callbacks, are implemented to acquire<br />the Big-lock before executing. From the above two, we have a deadlock.<br /><br />To avoid this, we release the Big-lock whenever a thread could block on<br />network I/O. This comes with a price. This opens up a window of time when<br />the shared data structures are prone to updates leading to inconsistencies.<br /><br />The Big-lock, in its current state, doesn’t even fully satisfy the problem<br />it set out to solve, and has more problems on top of that. These problems<br />are only going to grow with new features and new code being added to<br />GlusterD.<br /><br />Possible solutions<br />-----------------------<br /><br />The most obvious solution would be to split up the Big-lock into more fine<br />grained locks. We could go one step further and use replace the mutex locks<br />(Big-lock is a mutex lock), with readers-writer locks. This will bring in<br />more flexibility and fine grained control, at the cost of additional<br />overheads mainly in the complexity of implementation.<br /><br />As an alternative to readers-writer locks, we propose to use RCU as the<br />synchronization mechanism. RCU provides several advantages above<br />readers-writer locks while providing similar synchronization features.<br />These advantages make it more preferable to readers-writer locks, even<br />though the implementation complexity remains nearly the same for both<br />approaches.<br /><br />Read-copy-update (RCU)<br />--------------------------------<br /><br />RCU, short for Read-Copy-Update, is a synchronization mechanism that can be<br />used as an alternative to reader-writer locks.<br /><br />A good introduction to RCU can be found in this series of articles on LWN<br />[1] and [2]. The articles are with respect to the usage of RCU in the<br />Linux kernel, where it is used heavily.<br /><br />The advantages that make RCU preferable to RWlocks are the following,<br /><br />- Wait free reads<br />RCU readers have no wait overhead. They can never be blocked by writers.<br />RCU readers need to notify when they are in their critical sections, but<br />this notification is much lighter than locks.<br /><br />- Provides existence guarantees<br />RCU guarantees that RCU protected data in a readers critical section will<br />remain in existence till the end of the critical section. This is achieved<br />by having the writers work on a copy of the data, instead of using the<br />existing data.<br /><br />- Concurrent readers and writers<br />Wait-free reads and the existence guarantee mean that it is possible to<br />have readers and writers in concurrent execution. Any readers in execution,<br />before a writer starts will continue working with the original copy of the<br />data. The writer will work on a copy, and will use RCU methods to<br />swap/replace original data without affecting existing readers. Any readers<br />coming online after the writer will see the new data.<br />This does mean that some readers will continue to work with stale data,<br />but this isn't too big a problem as the data at least remains consistent<br />till the reader finishes.<br /><br />- Read-side deadlock immunity<br />RCU readers always run in a deterministic time as they never block. This<br />means that they can never become a part of a deadlock.<br /><br />- No writer starvation<br />As RCU readers don't block, writers can never starve.<br /><br />Userspace RCU<br />--------------------<br /><br />The kernel uses features provided by the processor to implement its RCU.<br />Userspace applications cannot make use of these features, but instead can<br />use the Userspace RCU library.<br /><br />liburcu [3] provides a userspace implementation of RCU, which is<br />portable across multiple platforms and operating systems. liburcu also<br />provides some common data structures and RCU protected APIs to use them.<br /><br />An introduction to URCU and its APIs can be found in this article on LWN<br />[4].<br /><br />[1]: https://lwn.net/Articles/262464/<br />[2]: https://lwn.net/Articles/263130/<br />[3]: http://urcu.so/<br />[4]: https://lwn.net/Articles/573424/<br /></p>
</blockquote>
</div>

<h2>Atin Mukherjee</h2>
<div class="bio">
<blockquote>
<div style="float: right; padding-left: 5px; padding-bottom: 5px; "><img src="https://seccdn.libravatar.org/avatar/354a6a5a2187e0314b7d2bc01d6c31dc?d=mm" alt=""></div>
<p>
Atin currently works as a Senior S/W Engineer in Redhat India and based out of Bengaluru office. He is having around 8 years of experience in various domains which includes Telecom, BFSI & Storage. Currently he is working in a open source distributed scalable storage system called 'Gluster' and is responsible of managing the management daemon of Gluster for configuration management of the cluster. He is also a FOSS enthusiast and loves to contribute to many open source projects. His area of interest is mainly distributed systems.
</p></blockquote>
</div>


</div>



        </div>
       <div class="col-md-8 col-md-offset-2">
          <br />
          <img class="featurette-image img-responsive center-block" src="/img/Geelong-Wave-Gradient-greyscale-small.png" alt="Geelong 2016">
        </div>
      </div>

      <hr class="featurette-divider">
      <div class="row">
        <div class="col-lg-8 col-md-offset-2">
          <div class="panel panel-primary">
            <div class="panel-heading">
              <h3 class="panel-title" style="text-align: center;">Our Emperor Penguin Sponsors</h1>
            </div>
            <div class="panel-body">
              <div class="row">
                <div class="col-xs-6 col-sm-4 col-sm-offset-1">
                  <img width="100%" src="/img/sponsors/HPE_logo.svg">
                </div>
                <div class="col-xs-6 col-sm-4 col-sm-offset-2">
                  <img width="100%" src="/img/sponsors/IBM_logo.svg">
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-lg-4">
          <img class="img-circle" src="/img/bollards2.jpg" alt="Geelong" width="140" height="140">
          <h2>About Geelong</h2>
          <p>Geelong is Victoria's second largest city, located on Corio Bay, and within a short drive from popular beach-front communities on the Bellarine Peninsula as well as being the gateway to the famous Great Ocean Road</p>
          <p><a class="btn btn-default" href="/about/geelong" role="button">More Info &raquo;</a></p>
        </div><!-- /.col-lg-4 -->
        <div class="col-lg-4">
          <img class="img-circle" src="/img/Tux-simple.svg" alt="linux.conf.au" width="140" height="140">
          <h2>linux.conf.au</h2>
          <p>linux.conf.au is widely regarded by delegates as one of the best community run Linux conferences worldwide and is the largest Linux and Open Source Software conference in the Asia-Pacific.</p>
          <p><a class="btn btn-default" href="/about/linux.conf.au" role="button">Read More &raquo;</a></p>
        </div><!-- /.col-lg-4 -->
        <div class="col-lg-4">
          <img class="img-circle" src="/img/ThePier-Crop.png" alt="Sponsorship" width="140" height="140">
          <h2>Sponsorship</h2>
          <p>Our Sponsors help make linux.conf.au become the awesome conference everyone comes back to year after year. Come see who's on board this year, or find out how to get in contact with us</p>
          <p><a class="btn btn-default" href="/sponsors/sponsors" role="button">Sponsorship &raquo;</a></p>
        </div><!-- /.col-lg-4 -->
      </div><!-- /.row -->
    </div><!-- /.container marketing -->


      <!-- FOOTER -->
      <footer>
        <p style="text-align: center;">&copy; 2015 linux.conf.au 2016 and <a href="http://linux.org.au">Linux Australia</a> &middot; Linux is a registered trademark of Linus Torvalds &middot; <a href="/sitemap">Sitemap</a></p>
        <p class="pull-right"><a href="#">Back to top</a></p>
      </footer>

    </div><!-- /.container page-content-wrapping-->
  </div><!--/.container wrapper -->


    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/validator.min.js"></script>
    <script src="/js/sorttable.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="/js/ie10-viewport-bug-workaround.js"></script>
    
    <!-- Sidebar Menu Toggle Script -->
    <script>
    $("#menu-toggle").click(function(e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
    });
    </script>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-63600300-1', 'auto');
      ga('send', 'pageview');

    </script>
  </body>
</html>

